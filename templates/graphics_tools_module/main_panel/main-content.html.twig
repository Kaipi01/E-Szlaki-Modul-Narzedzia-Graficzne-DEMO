{# <div class="search-area">
    <custom-search-form data-id="gtm-search-input-for-images" data-for-panel="main"></custom-search-form>
</div> #}

<div class="quick-access-area">
    {# <p class="area-header">Szybki dostęp</p> modern-card #}

    <custom-search-form data-id="gtm-search-input-for-images" data-for-panel="main"></custom-search-form>

    <ul class="access-links">
        <li>
            <a class="access-link-wrapper access-link-wrapper--light-green modern-card" href="{{ path('gtm_user_images_panel') }}">
                <i class="fa-solid fa-image access-icon"></i>
                <span class="access-text">Moje grafiki</span>
            </a>
        </li>
        <li>
            <a class="access-link-wrapper access-link-wrapper--light-green modern-card" href="{{ path('gtm_compressor_panel') }}">
                <i class="fa-solid fa-minimize access-icon"></i>
                <span class="access-text">Kompresor</span>
            </a>
        </li>
        <li>
            <a class="access-link-wrapper access-link-wrapper--green modern-card" href="{{ path('gtm_converter_panel') }}">
                <i class="fa-solid fa-icons access-icon"></i>
                <span class="access-text">Konwerter</span>
            </a>
        </li>
        <li>
            <a class="access-link-wrapper access-link-wrapper--green modern-card" href="{{ path('gtm_editor_panel') }}">
                <i class="fa-solid fa-screwdriver-wrench access-icon"></i>
                <span class="access-text">Edytor</span>
            </a>
        </li>
    </ul>
</div>

<div class="stats-area modern-card">

    {# <div class="stats-chart-container"></div> #}

    <p class="area-header"><i class="fa-regular fa-hard-drive"></i> Miejsce na dysku</p>

    <circular-progress-bar data-size="160"
        data-label="{{ userCurrentDiscStorage }} {{ discStorageUnit }} z {{ userMaxDiscStorage }} {{ discStorageUnit }} wykorzystane"
        data-pie='{
                "lineargradient": ["#14a5ff", "#008be2"],
                "round": true,
                "percent": {{ userCurrentDiscStoragePercent }},
                "colorCircle": "rgba(63, 98, 74, 0.25)"
        }'>
    </circular-progress-bar>

</div>

<div class="content-area modern-card">

    {% if userImages | length > 0 %}

    <section class="content-section">
        <div class="area-header-wrapper">
            <p class="area-header"><i class="fa-regular fa-image"></i> Ostatnie zdjęcia</p>
            <a href="{{ path('gtm_user_images_panel') }}" class="link small variant2">Zobacz wszystkie</a>
        </div>

        <images-gallery-modal></images-gallery-modal>

        <div class="last-images-preview">

            {% for image in userImages | slice(0, 3) %}

            <a href="#" aria-current="page" class="image-wrapper" data-gallery-preview data-src="{{ image.src }}">
                <div class="image-overlay">
                    <div class="photo-info">
                        <div class="photo-info-text">
                            <p class="photo-name medium"><i class="fa-regular fa-image"></i> {{ image.name }}</p>
                            <p class="photo-subtext medium">{{ image.size | formatBytes }}</p>
                        </div>
                    </div>
                </div>

                {% if image.thumbnailSrc %}
                {% set thumbnail = image.thumbnailSrc %}
                {% else %}
                {% set thumbnail = image.src %}
                {% endif %}

                <img src="{{ thumbnail }}" />

                <span class="photo-date">{{ image.uploadedAt | date("d.m.Y", "Europe/Warsaw") }}</span>
            </a>

            {% endfor %}

        </div>

        <div class="image-operation__table-container">
            <div class="table-responsive-vertical">
                <table class="table table-hover table-striped">
                    <thead>
                        <th>Format</th>
                        <th>Nazwa pliku</th>
                        <th>Rozmiar</th>
                        <th>Data Modyfikacji</th>
                        <th>Akcje</th>
                    </thead>
                    <tbody>

                        {% for image in userImages | slice(0, 8) %}

                        <tr>
                            <td>
                                <span class="mx-auto badge">{{ image.mimeType | replace({'image/': ''}) }}</span>
                            </td>
                            <td><i class="fa-regular fa-image"></i> {{ image.name }}</td>
                            <td>{{ image.size | formatBytes }}</td>
                            <td><i class="fa-regular fa-calendar"></i> {{ image.uploadedAt | date("d.m.Y", "Europe/Warsaw") }}</td>
                            <td>
                                <span class="image-operation__table-actions">
                                    <a href="{{ image.src }}" download
                                        class="mx-auto badge image-operation__item-download">
                                        <i class="fa-solid fa-circle-down image-operation__item-download-icon"></i>
                                        <span>Pobierz</span>
                                    </a>

                                    <a href="#" aria-current="page" class="mx-auto badge image-operation__item"
                                        data-gallery-preview data-src="{{ image.src }}">
                                        <i class="fa-solid fa-eye image-operation__item-icon"></i>
                                        <span>Podgląd</span>
                                    </a>
                                </span>
                            </td>
                        </tr>

                        {% endfor %}

                    </tbody>
                </table>
                <div class="table-footer"></div>
            </div>
        </div>

    </section>

    {% endif %}

</div>