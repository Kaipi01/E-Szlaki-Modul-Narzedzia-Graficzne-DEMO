const st=typeof window!="undefined"&&typeof window.document!="undefined",I=st?window:{},ot=st?"ontouchstart"in I.document.documentElement:!1,rt=st?"PointerEvent"in I:!1,z="cropper",U=`${z}-canvas`,Jt=`${z}-crosshair`,Vt=`${z}-grid`,Qt=`${z}-handle`,X=`${z}-image`,R=`${z}-selection`,te=`${z}-shade`,ee=`${z}-viewer`,Q="select",qt="move",Y="scale",nt="rotate",tt="transform",P="none",mt="n-resize",bt="e-resize",vt="s-resize",Ct="w-resize",j="ne-resize",B="nw-resize",q="se-resize",F="sw-resize",se="action",ie=ot?"touchend touchcancel":"mouseup",ne=ot?"touchmove":"mousemove",ae=ot?"touchstart":"mousedown",Et9=rt?"pointerdown":ae,wt=rt?"pointermove":ne,St=rt?"pointerup pointercancel":ie,yt="error",At="keydown",L="load",Tt="wheel",H="action",D="actionend",oe="actionmove",W="actionstart",M="change",at="transform";function J(l){return typeof l=="string"}const Ft=Number.isNaN||I.isNaN;function $(l){return typeof l=="number"&&!Ft(l)}function T(l){return $(l)&&l>0&&l<1/0}function re(l){return typeof l=="undefined"}function Kt(l){return typeof l=="object"&&l!==null}const{hasOwnProperty:he}=Object.prototype;function et(l){if(!Kt(l))return!1;try{const{constructor:t}=l,{prototype:e}=t;return t&&e&&he.call(e,"isPrototypeOf")}catch(t){return!1}}function ht(l){return typeof l=="function"}function K(l){return typeof l=="object"&&l!==null&&l.nodeType===1}const ce=/([a-z\d])([A-Z])/g;function kt(l){return String(l).replace(ce,"$1-$2").toLowerCase()}const le=/-[A-z\d]/g;function Ot(l){return l.replace(le,t=>t.slice(1).toUpperCase())}const Zt99=/\s\s*/;function C(l,t,e,s){t.trim().split(Zt99).forEach(i=>{l.removeEventListener(i,e,s)})}function E(l,t,e,s){t.trim().split(Zt99).forEach(i=>{l.addEventListener(i,e,s)})}function Nt(l,t,e,s){E(l,t,e,Object.assign(Object.assign({},s),{once:!0}))}const de={bubbles:!0,cancelable:!0,composed:!0};function ue(l,t,e,s){return l.dispatchEvent(new CustomEvent(t,Object.assign(Object.assign(Object.assign({},de),{detail:e}),s)))}const xt=Promise.resolve();function $e(l,t){return t?xt.then(l?t.bind(l):t):xt}function It(l){const{documentElement:t}=l.ownerDocument,e=l.getBoundingClientRect();return{left:e.left+(I.pageXOffset-t.clientLeft),top:e.top+(I.pageYOffset-t.clientTop)}}const fe=/deg|g?rad|turn$/i;function it(l){const t=parseFloat(l)||0;if(t!==0){const[e="rad"]=String(l).match(fe)||[];switch(e.toLowerCase()){case"deg":return t/360*(Math.PI*2);case"grad":return t/400*(Math.PI*2);case"turn":return t*(Math.PI*2)}}return t}const Rt="contain",pe="cover";function V(l,t=Rt){const{aspectRatio:e}=l;let{width:s,height:i}=l;const n=T(s),r=T(i);if(n&&r){const a=i*e;t===Rt&&a>s||t===pe&&a<s?i=s/e:s=i*e}else n?i=s/e:r&&(s=i*e);return{width:s,height:i}}function Gt(l,...t){if(t.length===0)return l;const[e,s,i,n,r,a]=l,[c,h,o,u,f,p]=t[0];return l=[e*c+i*h,s*c+n*h,e*o+i*u,s*o+n*u,e*f+i*p+r,s*f+n*p+a],Gt(l,...t.slice(1))}var ge=":host([hidden]){display:none!important}";const me=/left|top|width|height/i,_t="open",Z=new WeakMap,G=new WeakMap,Pt=new Map,Mt9=I.document&&Array.isArray(I.document.adoptedStyleSheets)&&"replaceSync"in I.CSSStyleSheet.prototype;class _ extends HTMLElement{get $sharedStyle(){return`${this.themeColor?`:host{--theme-color: ${this.themeColor};}`:""}${ge}`}constructor(){var t,e;super(),this.shadowRootMode=_t,this.slottable=!0;const s=(e=(t=Object.getPrototypeOf(this))===null||t===void 0?void 0:t.constructor)===null||e===void 0?void 0:e.$name;s&&Pt.set(s,this.tagName.toLowerCase())}static get observedAttributes(){return["shadow-root-mode","slottable","theme-color"]}attributeChangedCallback(t,e,s){if(Object.is(s,e))return;const i=Ot(t),n=this[i];let r=s;switch(typeof n){case"boolean":r=s!==null&&s!=="false";break;case"number":r=Number(s);break}switch(this[i]=r,t){case"theme-color":{const a=G.get(this),c=this.$sharedStyle;a&&c&&(Mt9?a.replaceSync(c):a.textContent=c);break}}}$propertyChangedCallback(t,e,s){if(!Object.is(s,e))switch(t=kt(t),typeof s){case"boolean":s===!0?this.hasAttribute(t)||this.setAttribute(t,""):this.removeAttribute(t);break;case"number":Ft(s)?s="":s=String(s);default:s?this.getAttribute(t)!==s&&this.setAttribute(t,s):this.removeAttribute(t)}}connectedCallback(){Object.getPrototypeOf(this).constructor.observedAttributes.forEach(e=>{const s=Ot(e);let i=this[s];re(i)||this.$propertyChangedCallback(s,void 0,i),Object.defineProperty(this,s,{enumerable:!0,configurable:!0,get(){return i},set(n){const r=i;i=n,this.$propertyChangedCallback(s,r,n)}})});const t=this.attachShadow({mode:this.shadowRootMode||_t});if(this.shadowRoot||Z.set(this,t),G.set(this,this.$addStyles(this.$sharedStyle)),this.$style&&this.$addStyles(this.$style),this.$template){const e=document.createElement("template");e.innerHTML=this.$template,t.appendChild(e.content)}if(this.slottable){const e=document.createElement("slot");t.appendChild(e)}}disconnectedCallback(){G.has(this)&&G.delete(this),Z.has(this)&&Z.delete(this)}$getTagNameOf(t){var e;return(e=Pt.get(t))!==null&&e!==void 0?e:t}$setStyles(t){return Object.keys(t).forEach(e=>{let s=t[e];$(s)&&(s!==0&&me.test(e)?s=`${s}px`:s=String(s)),this.style[e]=s}),this}$getShadowRoot(){return this.shadowRoot||Z.get(this)}$addStyles(t){let e;const s=this.$getShadowRoot();return Mt9?(e=new CSSStyleSheet,e.replaceSync(t),s.adoptedStyleSheets=s.adoptedStyleSheets.concat(e)):(e=document.createElement("style"),e.textContent=t,s.appendChild(e)),e}$emit(t,e,s){return ue(this,t,e,s)}$nextTick(t){return $e(this,t)}static $define(t,e){Kt(t)&&(e=t,t=""),t||(t=this.$name||this.name),t=kt(t),st&&I.customElements&&!I.customElements.get(t)&&customElements.define(t,this,e)}}_.$version="2.0.0";var be=':host{display:block;min-height:100px;min-width:200px;overflow:hidden;position:relative;touch-action:none;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}:host([background]){background-color:#fff;background-image:repeating-linear-gradient(45deg,#ccc 25%,transparent 0,transparent 75%,#ccc 0,#ccc),repeating-linear-gradient(45deg,#ccc 25%,transparent 0,transparent 75%,#ccc 0,#ccc);background-image:repeating-conic-gradient(#ccc 0 25%,#fff 0 50%);background-position:0 0,.5rem .5rem;background-size:1rem 1rem}:host([disabled]){pointer-events:none}:host([disabled]):after{bottom:0;content:"";cursor:not-allowed;display:block;left:0;pointer-events:none;position:absolute;right:0;top:0}';class ct extends _{constructor(){super(...arguments),this.$onPointerDown=null,this.$onPointerMove=null,this.$onPointerUp=null,this.$onWheel=null,this.$wheeling=!1,this.$pointers=new Map,this.$style=be,this.$action=P,this.background=!1,this.disabled=!1,this.scaleStep=.1,this.themeColor="#39f"}static get observedAttributes(){return super.observedAttributes.concat(["background","disabled","scale-step"])}connectedCallback(){super.connectedCallback(),this.disabled||this.$bind()}disconnectedCallback(){this.disabled||this.$unbind(),super.disconnectedCallback()}$propertyChangedCallback(t,e,s){if(!Object.is(s,e))switch(super.$propertyChangedCallback(t,e,s),t){case"disabled":s?this.$unbind():this.$bind();break}}$bind(){this.$onPointerDown||(this.$onPointerDown=this.$handlePointerDown.bind(this),E(this,Et9,this.$onPointerDown)),this.$onPointerMove||(this.$onPointerMove=this.$handlePointerMove.bind(this),E(this.ownerDocument,wt,this.$onPointerMove)),this.$onPointerUp||(this.$onPointerUp=this.$handlePointerUp.bind(this),E(this.ownerDocument,St,this.$onPointerUp)),this.$onWheel||(this.$onWheel=this.$handleWheel.bind(this),E(this,Tt,this.$onWheel,{passive:!1,capture:!0}))}$unbind(){this.$onPointerDown&&(C(this,Et9,this.$onPointerDown),this.$onPointerDown=null),this.$onPointerMove&&(C(this.ownerDocument,wt,this.$onPointerMove),this.$onPointerMove=null),this.$onPointerUp&&(C(this.ownerDocument,St,this.$onPointerUp),this.$onPointerUp=null),this.$onWheel&&(C(this,Tt,this.$onWheel,{capture:!0}),this.$onWheel=null)}$handlePointerDown(t){const{buttons:e,button:s,type:i}=t;if(this.disabled||(i==="pointerdown"&&t.pointerType==="mouse"||i==="mousedown")&&($(e)&&e!==1||$(s)&&s!==0||t.ctrlKey))return;const{$pointers:n}=this;let r="";if(t.changedTouches)Array.from(t.changedTouches).forEach(({identifier:a,pageX:c,pageY:h})=>{n.set(a,{startX:c,startY:h,endX:c,endY:h})});else{const{pointerId:a=0,pageX:c,pageY:h}=t;n.set(a,{startX:c,startY:h,endX:c,endY:h})}n.size>1?r=tt:K(t.target)&&(r=t.target.action||t.target.getAttribute(se)||""),this.$emit(W,{action:r,relatedEvent:t})!==!1&&(t.preventDefault(),this.$action=r,this.style.willChange="transform")}$handlePointerMove(t){const{$action:e,$pointers:s}=this;if(this.disabled||e===P||s.size===0||this.$emit(oe,{action:e,relatedEvent:t})===!1)return;if(t.preventDefault(),t.changedTouches)Array.from(t.changedTouches).forEach(({identifier:n,pageX:r,pageY:a})=>{const c=s.get(n);c&&Object.assign(c,{endX:r,endY:a})});else{const{pointerId:n=0,pageX:r,pageY:a}=t,c=s.get(n);c&&Object.assign(c,{endX:r,endY:a})}const i={action:e,relatedEvent:t};if(e===tt){const n=new Map(s);let r=0,a=0,c=0,h=0,o=t.pageX,u=t.pageY;s.forEach((d,y)=>{n.delete(y),n.forEach(w=>{let g=w.startX-d.startX,v=w.startY-d.startY,m=w.endX-d.endX,b=w.endY-d.endY,S=0,A=0,k=0,O=0;if(g===0?v<0?k=Math.PI*2:v>0&&(k=Math.PI):g>0?k=Math.PI/2+Math.atan(v/g):g<0&&(k=Math.PI*1.5+Math.atan(v/g)),m===0?b<0?O=Math.PI*2:b>0&&(O=Math.PI):m>0?O=Math.PI/2+Math.atan(b/m):m<0&&(O=Math.PI*1.5+Math.atan(b/m)),O>0||k>0){const N=O-k,x=Math.abs(N);x>r&&(r=x,c=N,o=(d.startX+w.startX)/2,u=(d.startY+w.startY)/2)}if(g=Math.abs(g),v=Math.abs(v),m=Math.abs(m),b=Math.abs(b),g>0&&v>0?S=Math.sqrt(g*g+v*v):g>0?S=g:v>0&&(S=v),m>0&&b>0?A=Math.sqrt(m*m+b*b):m>0?A=m:b>0&&(A=b),S>0&&A>0){const N=(A-S)/S,x=Math.abs(N);x>a&&(a=x,h=N,o=(d.startX+w.startX)/2,u=(d.startY+w.startY)/2)}})});const f=r>0,p=a>0;f&&p?(i.rotate=c,i.scale=h,i.centerX=o,i.centerY=u):f?(i.action=nt,i.rotate=c,i.centerX=o,i.centerY=u):p?(i.action=Y,i.scale=h,i.centerX=o,i.centerY=u):i.action=P}else{const[n]=Array.from(s.values());Object.assign(i,n)}s.forEach(n=>{n.startX=n.endX,n.startY=n.endY}),i.action!==P&&this.$emit(H,i,{cancelable:!1})}$handlePointerUp(t){const{$action:e,$pointers:s}=this;if(!(this.disabled||e===P)&&this.$emit(D,{action:e,relatedEvent:t})!==!1){if(t.preventDefault(),t.changedTouches)Array.from(t.changedTouches).forEach(({identifier:i})=>{s.delete(i)});else{const{pointerId:i=0}=t;s.delete(i)}s.size===0&&(this.style.willChange="",this.$action=P)}}$handleWheel(t){if(this.disabled||(t.preventDefault(),this.$wheeling))return;this.$wheeling=!0,setTimeout(()=>{this.$wheeling=!1},50);const s=(t.deltaY>0?-1:1)*this.scaleStep;this.$emit(H,{action:Y,scale:s,relatedEvent:t},{cancelable:!1})}$setAction(t){return J(t)&&(this.$action=t),this}$toCanvas(t){return new Promise((e,s)=>{if(!this.isConnected){s(new Error("The current element is not connected to the DOM."));return}const i=document.createElement("canvas");let n=this.offsetWidth,r=this.offsetHeight,a=1;et(t)&&(T(t.width)||T(t.height))&&({width:n,height:r}=V({aspectRatio:n/r,width:t.width,height:t.height}),a=n/this.offsetWidth),i.width=n,i.height=r;const c=this.querySelector(this.$getTagNameOf(X));if(!c){e(i);return}c.$ready().then(h=>{const o=i.getContext("2d");if(o){const[u,f,p,d,y,w]=c.$getTransform();let g=y,v=w,m=h.naturalWidth,b=h.naturalHeight;a!==1&&(g*=a,v*=a,m*=a,b*=a);const S=m/2,A=b/2;o.fillStyle="transparent",o.fillRect(0,0,n,r),et(t)&&ht(t.beforeDraw)&&t.beforeDraw.call(this,o,i),o.save(),o.translate(S,A),o.transform(u,f,p,d,g,v),o.translate(-S,-A),o.drawImage(h,0,0,m,b),o.restore()}e(i)}).catch(s)})}}ct.$name=U;ct.$version="2.0.0";var ve=":host{display:inline-block}img{display:block;height:100%;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;width:100%}";const zt=new WeakMap,Dt=["alt","crossorigin","decoding","importance","loading","referrerpolicy","sizes","src","srcset"];class lt extends _{constructor(){super(...arguments),this.$matrix=[1,0,0,1,0,0],this.$onLoad=null,this.$onCanvasAction=null,this.$onCanvasActionEnd=null,this.$onCanvasActionStart=null,this.$actionStartTarget=null,this.$style=ve,this.$image=new Image,this.initialCenterSize="contain",this.rotatable=!1,this.scalable=!1,this.skewable=!1,this.slottable=!1,this.translatable=!1}set $canvas(t){zt.set(this,t)}get $canvas(){return zt.get(this)}static get observedAttributes(){return super.observedAttributes.concat(Dt,["initial-center-size","rotatable","scalable","skewable","translatable"])}attributeChangedCallback(t,e,s){Object.is(s,e)||(super.attributeChangedCallback(t,e,s),Dt.includes(t)&&this.$image.setAttribute(t,s))}$propertyChangedCallback(t,e,s){if(!Object.is(s,e))switch(super.$propertyChangedCallback(t,e,s),t){case"initialCenterSize":this.$nextTick(()=>{this.$center(s)});break}}connectedCallback(){super.connectedCallback();const{$image:t}=this,e=this.closest(this.$getTagNameOf(U));e&&(this.$canvas=e,this.$setStyles({display:"block",position:"absolute"}),this.$onCanvasActionStart=s=>{var i,n;this.$actionStartTarget=(n=(i=s.detail)===null||i===void 0?void 0:i.relatedEvent)===null||n===void 0?void 0:n.target},this.$onCanvasActionEnd=()=>{this.$actionStartTarget=null},this.$onCanvasAction=this.$handleAction.bind(this),E(e,W,this.$onCanvasActionStart),E(e,D,this.$onCanvasActionEnd),E(e,H,this.$onCanvasAction)),this.$onLoad=this.$handleLoad.bind(this),E(t,L,this.$onLoad),this.$getShadowRoot().appendChild(t)}disconnectedCallback(){const{$image:t,$canvas:e}=this;e&&(this.$onCanvasActionStart&&(C(e,W,this.$onCanvasActionStart),this.$onCanvasActionStart=null),this.$onCanvasActionEnd&&(C(e,D,this.$onCanvasActionEnd),this.$onCanvasActionEnd=null),this.$onCanvasAction&&(C(e,H,this.$onCanvasAction),this.$onCanvasAction=null)),t&&this.$onLoad&&(C(t,L,this.$onLoad),this.$onLoad=null),this.$getShadowRoot().removeChild(t),super.disconnectedCallback()}$handleLoad(){const{$image:t}=this;this.$setStyles({width:t.naturalWidth,height:t.naturalHeight}),this.$canvas&&this.$center(this.initialCenterSize)}$handleAction(t){if(this.hidden||!(this.rotatable||this.scalable||this.translatable))return;const{$canvas:e}=this,{detail:s}=t;if(s){const{relatedEvent:i}=s;let{action:n}=s;switch(n===tt&&(!this.rotatable||!this.scalable)&&(this.rotatable?n=nt:this.scalable?n=Y:n=P),n){case qt:if(this.translatable){let r=null;i&&(r=i.target.closest(this.$getTagNameOf(R))),r||(r=e.querySelector(this.$getTagNameOf(R))),r&&r.multiple&&!r.active&&(r=e.querySelector(`${this.$getTagNameOf(R)}[active]`)),(!r||r.hidden||!r.movable||r.dynamic||!(this.$actionStartTarget&&r.contains(this.$actionStartTarget)))&&this.$move(s.endX-s.startX,s.endY-s.startY)}break;case nt:if(this.rotatable)if(i){const{x:r,y:a}=this.getBoundingClientRect();this.$rotate(s.rotate,i.clientX-r,i.clientY-a)}else this.$rotate(s.rotate);break;case Y:if(this.scalable)if(i){const r=i.target.closest(this.$getTagNameOf(R));if(!r||!r.zoomable||r.zoomable&&r.dynamic){const{x:a,y:c}=this.getBoundingClientRect();this.$zoom(s.scale,i.clientX-a,i.clientY-c)}}else this.$zoom(s.scale);break;case tt:if(this.rotatable&&this.scalable){const{rotate:r}=s;let{scale:a}=s;a<0?a=1/(1-a):a+=1;const c=Math.cos(r),h=Math.sin(r),[o,u,f,p]=[c*a,h*a,-h*a,c*a];if(i){const d=this.getBoundingClientRect(),y=i.clientX-d.x,w=i.clientY-d.y,[g,v,m,b]=this.$matrix,S=d.width/2,A=d.height/2,k=y-S,O=w-A,N=(k*b-m*O)/(g*b-m*v),x=(O*g-v*k)/(g*b-m*v);this.$transform(o,u,f,p,N*(1-o)+x*f,x*(1-p)+N*u)}else this.$transform(o,u,f,p,0,0)}break}}}$ready(t){const{$image:e}=this,s=new Promise((i,n)=>{const r=new Error("Failed to load the image source");if(e.complete)e.naturalWidth>0&&e.naturalHeight>0?i(e):n(r);else{const a=()=>{C(e,yt,c),i(e)},c=()=>{C(e,L,a),n(r)};Nt(e,L,a),Nt(e,yt,c)}});return ht(t)&&s.then(i=>(t(i),i)),s}$center(t){const{parentElement:e}=this;if(!e)return this;const s=e.getBoundingClientRect(),i=s.width,n=s.height,{x:r,y:a,width:c,height:h}=this.getBoundingClientRect(),o=r+c/2,u=a+h/2,f=s.x+i/2,p=s.y+n/2;if(this.$move(f-o,p-u),t&&(c!==i||h!==n)){const d=i/c,y=n/h;switch(t){case"cover":this.$scale(Math.max(d,y));break;case"contain":this.$scale(Math.min(d,y));break}}return this}$move(t,e=t){if(this.translatable&&$(t)&&$(e)){const[s,i,n,r]=this.$matrix,a=(t*r-n*e)/(s*r-n*i),c=(e*s-i*t)/(s*r-n*i);this.$translate(a,c)}return this}$moveTo(t,e=t){if(this.translatable&&$(t)&&$(e)){const[s,i,n,r]=this.$matrix,a=(t*r-n*e)/(s*r-n*i),c=(e*s-i*t)/(s*r-n*i);this.$setTransform(s,i,n,r,a,c)}return this}$rotate(t,e,s){if(this.rotatable){const i=it(t),n=Math.cos(i),r=Math.sin(i),[a,c,h,o]=[n,r,-r,n];if($(e)&&$(s)){const[u,f,p,d]=this.$matrix,{width:y,height:w}=this.getBoundingClientRect(),g=y/2,v=w/2,m=e-g,b=s-v,S=(m*d-p*b)/(u*d-p*f),A=(b*u-f*m)/(u*d-p*f);this.$transform(a,c,h,o,S*(1-a)-A*h,A*(1-o)-S*c)}else this.$transform(a,c,h,o,0,0)}return this}$zoom(t,e,s){if(!this.scalable||t===0)return this;if(t<0?t=1/(1-t):t+=1,$(e)&&$(s)){const[i,n,r,a]=this.$matrix,{width:c,height:h}=this.getBoundingClientRect(),o=c/2,u=h/2,f=e-o,p=s-u,d=(f*a-r*p)/(i*a-r*n),y=(p*i-n*f)/(i*a-r*n);this.$transform(t,0,0,t,d*(1-t),y*(1-t))}else this.$scale(t);return this}$scale(t,e=t){return this.scalable&&this.$transform(t,0,0,e,0,0),this}$skew(t,e=0){if(this.skewable){const s=it(t),i=it(e);this.$transform(1,Math.tan(i),Math.tan(s),1,0,0)}return this}$translate(t,e=t){return this.translatable&&$(t)&&$(e)&&this.$transform(1,0,0,1,t,e),this}$transform(t,e,s,i,n,r){return $(t)&&$(e)&&$(s)&&$(i)&&$(n)&&$(r)?this.$setTransform(Gt(this.$matrix,[t,e,s,i,n,r])):this}$setTransform(t,e,s,i,n,r){if((this.rotatable||this.scalable||this.skewable||this.translatable)&&(Array.isArray(t)&&([t,e,s,i,n,r]=t),$(t)&&$(e)&&$(s)&&$(i)&&$(n)&&$(r))){const a=[...this.$matrix],c=[t,e,s,i,n,r];if(this.$emit(at,{matrix:c,oldMatrix:a})===!1)return this;this.$matrix=c,this.style.transform=`matrix(${c.join(", ")})`}return this}$getTransform(){return this.$matrix.slice()}$resetTransform(){return this.$setTransform([1,0,0,1,0,0])}}lt.$name=X;lt.$version="2.0.0";var Ce=":host{display:block;height:0;left:0;outline:var(--theme-color) solid 1px;position:relative;top:0;width:0}:host([transparent]){outline-color:transparent}";const Wt=new WeakMap;class dt extends _{constructor(){super(...arguments),this.$onCanvasChange=null,this.$onCanvasActionEnd=null,this.$onCanvasActionStart=null,this.$style=Ce,this.x=0,this.y=0,this.width=0,this.height=0,this.slottable=!1,this.themeColor="rgba(0, 0, 0, 0.65)"}set $canvas(t){Wt.set(this,t)}get $canvas(){return Wt.get(this)}static get observedAttributes(){return super.observedAttributes.concat(["height","width","x","y"])}connectedCallback(){super.connectedCallback();const t=this.closest(this.$getTagNameOf(U));if(t){this.$canvas=t,this.style.position="absolute";const e=t.querySelector(this.$getTagNameOf(R));e&&(this.$onCanvasActionStart=s=>{e.hidden&&s.detail.action===Q&&(this.hidden=!1)},this.$onCanvasActionEnd=s=>{e.hidden&&s.detail.action===Q&&(this.hidden=!0)},this.$onCanvasChange=s=>{const{x:i,y:n,width:r,height:a}=s.detail;this.$change(i,n,r,a),(e.hidden||i===0&&n===0&&r===0&&a===0)&&(this.hidden=!0)},E(t,W,this.$onCanvasActionStart),E(t,D,this.$onCanvasActionEnd),E(t,M,this.$onCanvasChange))}this.$render()}disconnectedCallback(){const{$canvas:t}=this;t&&(this.$onCanvasActionStart&&(C(t,W,this.$onCanvasActionStart),this.$onCanvasActionStart=null),this.$onCanvasActionEnd&&(C(t,D,this.$onCanvasActionEnd),this.$onCanvasActionEnd=null),this.$onCanvasChange&&(C(t,M,this.$onCanvasChange),this.$onCanvasChange=null)),super.disconnectedCallback()}$change(t,e,s=this.width,i=this.height){return!$(t)||!$(e)||!$(s)||!$(i)||t===this.x&&e===this.y&&s===this.width&&i===this.height?this:(this.hidden&&(this.hidden=!1),this.x=t,this.y=e,this.width=s,this.height=i,this.$render())}$reset(){return this.$change(0,0,0,0)}$render(){return this.$setStyles({transform:`translate(${this.x}px, ${this.y}px)`,width:this.width,height:this.height,outlineWidth:I.innerWidth})}}dt.$name=te;dt.$version="2.0.0";var Ee=':host{background-color:var(--theme-color);display:block}:host([action=move]),:host([action=select]){height:100%;left:0;position:absolute;top:0;width:100%}:host([action=move]){cursor:move}:host([action=select]){cursor:crosshair}:host([action$=-resize]){background-color:transparent;height:15px;position:absolute;width:15px}:host([action$=-resize]):after{background-color:var(--theme-color);content:"";display:block;height:5px;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);width:5px}:host([action=n-resize]),:host([action=s-resize]){cursor:ns-resize;left:50%;transform:translateX(-50%);width:100%}:host([action=n-resize]){top:-8px}:host([action=s-resize]){bottom:-8px}:host([action=e-resize]),:host([action=w-resize]){cursor:ew-resize;height:100%;top:50%;transform:translateY(-50%)}:host([action=e-resize]){right:-8px}:host([action=w-resize]){left:-8px}:host([action=ne-resize]){cursor:nesw-resize;right:-8px;top:-8px}:host([action=nw-resize]){cursor:nwse-resize;left:-8px;top:-8px}:host([action=se-resize]){bottom:-8px;cursor:nwse-resize;right:-8px}:host([action=se-resize]):after{height:15px;width:15px}@media (pointer:coarse){:host([action=se-resize]):after{height:10px;width:10px}}@media (pointer:fine){:host([action=se-resize]):after{height:5px;width:5px}}:host([action=sw-resize]){bottom:-8px;cursor:nesw-resize;left:-8px}:host([plain]){background-color:transparent}';class ut extends _{constructor(){super(...arguments),this.$onCanvasCropEnd=null,this.$onCanvasCropStart=null,this.$style=Ee,this.action=P,this.plain=!1,this.slottable=!1,this.themeColor="rgba(51, 153, 255, 0.5)"}static get observedAttributes(){return super.observedAttributes.concat(["action","plain"])}}ut.$name=Qt;ut.$version="2.0.0";var we=':host{display:block;left:0;position:relative;right:0}:host([outlined]){outline:1px solid var(--theme-color)}:host([multiple]){outline:1px dashed hsla(0,0%,100%,.5)}:host([multiple]):after{bottom:0;content:"";cursor:pointer;display:block;left:0;position:absolute;right:0;top:0}:host([multiple][active]){outline-color:var(--theme-color);z-index:1}:host([multiple])>*{visibility:hidden}:host([multiple][active])>*{visibility:visible}:host([multiple][active]):after{display:none}';const Lt=new WeakMap;class $t extends _{constructor(){super(...arguments),this.$onCanvasAction=null,this.$onCanvasActionStart=null,this.$onCanvasActionEnd=null,this.$onDocumentKeyDown=null,this.$action="",this.$actionStartTarget=null,this.$changing=!1,this.$style=we,this.$initialSelection={x:0,y:0,width:0,height:0},this.x=0,this.y=0,this.width=0,this.height=0,this.aspectRatio=NaN,this.initialAspectRatio=NaN,this.initialCoverage=NaN,this.active=!1,this.linked=!1,this.dynamic=!1,this.movable=!1,this.resizable=!1,this.zoomable=!1,this.multiple=!1,this.keyboard=!1,this.outlined=!1,this.precise=!1}set $canvas(t){Lt.set(this,t)}get $canvas(){return Lt.get(this)}static get observedAttributes(){return super.observedAttributes.concat(["active","aspect-ratio","dynamic","height","initial-aspect-ratio","initial-coverage","keyboard","linked","movable","multiple","outlined","precise","resizable","width","x","y","zoomable"])}$propertyChangedCallback(t,e,s){if(!Object.is(s,e))switch(super.$propertyChangedCallback(t,e,s),t){case"x":case"y":case"width":case"height":this.$changing||this.$nextTick(()=>{this.$change(this.x,this.y,this.width,this.height,this.aspectRatio,!0)});break;case"aspectRatio":case"initialAspectRatio":this.$nextTick(()=>{this.$initSelection()});break;case"initialCoverage":this.$nextTick(()=>{T(s)&&s<=1&&this.$initSelection(!0,!0)});break;case"keyboard":this.$nextTick(()=>{this.$canvas&&(s?this.$onDocumentKeyDown||(this.$onDocumentKeyDown=this.$handleKeyDown.bind(this),E(this.ownerDocument,At,this.$onDocumentKeyDown)):this.$onDocumentKeyDown&&(C(this.ownerDocument,At,this.$onDocumentKeyDown),this.$onDocumentKeyDown=null))});break;case"multiple":this.$nextTick(()=>{if(this.$canvas){const i=this.$getSelections();s?(i.forEach(n=>{n.active=!1}),this.active=!0,this.$emit(M,{x:this.x,y:this.y,width:this.width,height:this.height})):(this.active=!1,i.slice(1).forEach(n=>{this.$removeSelection(n)}))}});break;case"precise":this.$nextTick(()=>{this.$change(this.x,this.y)});break;case"linked":s&&(this.dynamic=!0);break}}connectedCallback(){super.connectedCallback();const t=this.closest(this.$getTagNameOf(U));t?(this.$canvas=t,this.$setStyles({position:"absolute",transform:`translate(${this.x}px, ${this.y}px)`}),this.hidden||this.$render(),this.$initSelection(!0),this.$onCanvasActionStart=this.$handleActionStart.bind(this),this.$onCanvasActionEnd=this.$handleActionEnd.bind(this),this.$onCanvasAction=this.$handleAction.bind(this),E(t,W,this.$onCanvasActionStart),E(t,D,this.$onCanvasActionEnd),E(t,H,this.$onCanvasAction)):this.$render()}disconnectedCallback(){const{$canvas:t}=this;t&&(this.$onCanvasActionStart&&(C(t,W,this.$onCanvasActionStart),this.$onCanvasActionStart=null),this.$onCanvasActionEnd&&(C(t,D,this.$onCanvasActionEnd),this.$onCanvasActionEnd=null),this.$onCanvasAction&&(C(t,H,this.$onCanvasAction),this.$onCanvasAction=null)),super.disconnectedCallback()}$getSelections(){let t=[];return this.parentElement&&(t=Array.from(this.parentElement.querySelectorAll(this.$getTagNameOf(R)))),t}$initSelection(t=!1,e=!1){const{initialCoverage:s,parentElement:i}=this;if(T(s)&&i){const n=this.aspectRatio||this.initialAspectRatio;let r=(e?0:this.width)||i.offsetWidth*s,a=(e?0:this.height)||i.offsetHeight*s;T(n)&&({width:r,height:a}=V({aspectRatio:n,width:r,height:a})),this.$change(this.x,this.y,r,a),t&&this.$center(),this.$initialSelection={x:this.x,y:this.y,width:this.width,height:this.height}}}$createSelection(){const t=this.cloneNode(!0);return this.hasAttribute("id")&&t.removeAttribute("id"),t.initialCoverage=NaN,this.active=!1,this.parentElement&&this.parentElement.insertBefore(t,this.nextSibling),t}$removeSelection(t=this){if(this.parentElement){const e=this.$getSelections();if(e.length>1){const s=e.indexOf(t),i=e[s+1]||e[s-1];i&&(t.active=!1,this.parentElement.removeChild(t),i.active=!0,i.$emit(M,{x:i.x,y:i.y,width:i.width,height:i.height}))}else this.$clear()}}$handleActionStart(t){var e,s;const i=(s=(e=t.detail)===null||e===void 0?void 0:e.relatedEvent)===null||s===void 0?void 0:s.target;this.$action="",this.$actionStartTarget=i,!this.hidden&&this.multiple&&!this.active&&i===this&&this.parentElement&&(this.$getSelections().forEach(n=>{n.active=!1}),this.active=!0,this.$emit(M,{x:this.x,y:this.y,width:this.width,height:this.height}))}$handleAction(t){const{currentTarget:e,detail:s}=t;if(!e||!s)return;const{relatedEvent:i}=s;let{action:n}=s;if(!n&&this.multiple&&(n=this.$action||(i==null?void 0:i.target.action),this.$action=n),!n||this.hidden&&n!==Q||this.multiple&&!this.active&&n!==Y)return;const r=s.endX-s.startX,a=s.endY-s.startY,{width:c,height:h}=this;let{aspectRatio:o}=this;switch(!T(o)&&i.shiftKey&&(o=T(c)&&T(h)?c/h:1),n){case Q:if(r!==0&&a!==0){const{$canvas:u}=this,f=It(e);(this.multiple&&!this.hidden?this.$createSelection():this).$change(s.startX-f.left,s.startY-f.top,Math.abs(r),Math.abs(a),o),r<0?a<0?n=B:a>0&&(n=F):r>0&&(a<0?n=j:a>0&&(n=q)),u&&(u.$action=n)}break;case qt:this.movable&&(this.dynamic||this.$actionStartTarget&&this.contains(this.$actionStartTarget))&&this.$move(r,a);break;case Y:if(i&&this.zoomable&&(this.dynamic||this.contains(i.target))){const u=It(e);this.$zoom(s.scale,i.pageX-u.left,i.pageY-u.top)}break;default:this.$resize(n,r,a,o)}}$handleActionEnd(){this.$action="",this.$actionStartTarget=null}$handleKeyDown(t){if(this.hidden||!this.keyboard||this.multiple&&!this.active||t.defaultPrevented)return;const{activeElement:e}=document;if(!(e&&(["INPUT","TEXTAREA"].includes(e.tagName)||["true","plaintext-only"].includes(e.contentEditable))))switch(t.key){case"Backspace":t.metaKey&&(t.preventDefault(),this.$removeSelection());break;case"Delete":t.preventDefault(),this.$removeSelection();break;case"ArrowLeft":t.preventDefault(),this.$move(-1,0);break;case"ArrowRight":t.preventDefault(),this.$move(1,0);break;case"ArrowUp":t.preventDefault(),this.$move(0,-1);break;case"ArrowDown":t.preventDefault(),this.$move(0,1);break;case"+":t.preventDefault(),this.$zoom(.1);break;case"-":t.preventDefault(),this.$zoom(-.1);break}}$center(){const{parentElement:t}=this;if(!t)return this;const e=(t.offsetWidth-this.width)/2,s=(t.offsetHeight-this.height)/2;return this.$change(e,s)}$move(t,e=t){return this.$moveTo(this.x+t,this.y+e)}$moveTo(t,e=t){return this.movable?this.$change(t,e):this}$resize(t,e=0,s=0,i=this.aspectRatio){if(!this.resizable)return this;const n=T(i),{$canvas:r}=this;let{x:a,y:c,width:h,height:o}=this;switch(t){case mt:c+=s,o-=s,o<0&&(t=vt,o=-o,c-=o),n&&(e=s*i,a+=e/2,h-=e,h<0&&(h=-h,a-=h));break;case bt:h+=e,h<0&&(t=Ct,h=-h,a-=h),n&&(s=e/i,c-=s/2,o+=s,o<0&&(o=-o,c-=o));break;case vt:o+=s,o<0&&(t=mt,o=-o,c-=o),n&&(e=s*i,a-=e/2,h+=e,h<0&&(h=-h,a-=h));break;case Ct:a+=e,h-=e,h<0&&(t=bt,h=-h,a-=h),n&&(s=e/i,c+=s/2,o-=s,o<0&&(o=-o,c-=o));break;case j:n&&(s=-e/i),c+=s,o-=s,h+=e,h<0&&o<0?(t=F,h=-h,o=-o,a-=h,c-=o):h<0?(t=B,h=-h,a-=h):o<0&&(t=q,o=-o,c-=o);break;case B:n&&(s=e/i),a+=e,c+=s,h-=e,o-=s,h<0&&o<0?(t=q,h=-h,o=-o,a-=h,c-=o):h<0?(t=j,h=-h,a-=h):o<0&&(t=F,o=-o,c-=o);break;case q:n&&(s=e/i),h+=e,o+=s,h<0&&o<0?(t=B,h=-h,o=-o,a-=h,c-=o):h<0?(t=F,h=-h,a-=h):o<0&&(t=j,o=-o,c-=o);break;case F:n&&(s=-e/i),a+=e,h-=e,o+=s,h<0&&o<0?(t=j,h=-h,o=-o,a-=h,c-=o):h<0?(t=q,h=-h,a-=h):o<0&&(t=B,o=-o,c-=o);break}return r&&r.$setAction(t),this.$change(a,c,h,o)}$zoom(t,e,s){if(!this.zoomable||t===0)return this;t<0?t=1/(1-t):t+=1;const{width:i,height:n}=this,r=i*t,a=n*t;let c=this.x,h=this.y;return $(e)&&$(s)?(c-=(r-i)*((e-this.x)/i),h-=(a-n)*((s-this.y)/n)):(c-=(r-i)/2,h-=(a-n)/2),this.$change(c,h,r,a)}$change(t,e,s=this.width,i=this.height,n=this.aspectRatio,r=!1){return this.$changing||!$(t)||!$(e)||!$(s)||!$(i)||s<0||i<0?this:(T(n)&&({width:s,height:i}=V({aspectRatio:n,width:s,height:i},"cover")),this.precise||(t=Math.round(t),e=Math.round(e),s=Math.round(s),i=Math.round(i)),t===this.x&&e===this.y&&s===this.width&&i===this.height&&Object.is(n,this.aspectRatio)&&!r?this:(this.hidden&&(this.hidden=!1),this.$emit(M,{x:t,y:e,width:s,height:i})===!1?this:(this.$changing=!0,this.x=t,this.y=e,this.width=s,this.height=i,this.$changing=!1,this.$render())))}$reset(){const{x:t,y:e,width:s,height:i}=this.$initialSelection;return this.$change(t,e,s,i)}$clear(){return this.$change(0,0,0,0,NaN,!0),this.hidden=!0,this}$render(){return this.$setStyles({transform:`translate(${this.x}px, ${this.y}px)`,width:this.width,height:this.height})}$toCanvas(t){return new Promise((e,s)=>{if(!this.isConnected){s(new Error("The current element is not connected to the DOM."));return}const i=document.createElement("canvas");let{width:n,height:r}=this,a=1;if(et(t)&&(T(t.width)||T(t.height))&&({width:n,height:r}=V({aspectRatio:n/r,width:t.width,height:t.height}),a=n/this.width),i.width=n,i.height=r,!this.$canvas){e(i);return}const c=this.$canvas.querySelector(this.$getTagNameOf(X));if(!c){e(i);return}c.$ready().then(h=>{const o=i.getContext("2d");if(o){const[u,f,p,d,y,w]=c.$getTransform(),g=-this.x,v=-this.y,m=(g*d-p*v)/(u*d-p*f),b=(v*u-f*g)/(u*d-p*f);let S=u*m+p*b+y,A=f*m+d*b+w,k=h.naturalWidth,O=h.naturalHeight;a!==1&&(S*=a,A*=a,k*=a,O*=a);const N=k/2,x=O/2;o.fillStyle="transparent",o.fillRect(0,0,n,r),et(t)&&ht(t.beforeDraw)&&t.beforeDraw.call(this,o,i),o.save(),o.translate(N,x),o.transform(u,f,p,d,S,A),o.translate(-N,-x),o.drawImage(h,0,0,k,O),o.restore()}e(i)}).catch(s)})}}$t.$name=R;$t.$version="2.0.0";var Se=":host{display:flex;flex-direction:column;position:relative;touch-action:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}:host([bordered]){border:1px dashed var(--theme-color)}:host([covered]){bottom:0;left:0;position:absolute;right:0;top:0}:host>span{display:flex;flex:1}:host>span+span{border-top:1px dashed var(--theme-color)}:host>span>span{flex:1}:host>span>span+span{border-left:1px dashed var(--theme-color)}";class ft extends _{constructor(){super(...arguments),this.$style=Se,this.bordered=!1,this.columns=3,this.covered=!1,this.rows=3,this.slottable=!1,this.themeColor="rgba(238, 238, 238, 0.5)"}static get observedAttributes(){return super.observedAttributes.concat(["bordered","columns","covered","rows"])}$propertyChangedCallback(t,e,s){Object.is(s,e)||(super.$propertyChangedCallback(t,e,s),(t==="rows"||t==="columns")&&this.$nextTick(()=>{this.$render()}))}connectedCallback(){super.connectedCallback(),this.$render()}$render(){const t=this.$getShadowRoot(),e=document.createDocumentFragment();for(let s=0;s<this.rows;s+=1){const i=document.createElement("span");i.setAttribute("role","row");for(let n=0;n<this.columns;n+=1){const r=document.createElement("span");r.setAttribute("role","gridcell"),i.appendChild(r)}e.appendChild(i)}t&&(t.innerHTML="",t.appendChild(e))}}ft.$name=Vt;ft.$version="2.0.0";var ye=':host{display:inline-block;height:1em;position:relative;touch-action:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle;width:1em}:host:after,:host:before{background-color:var(--theme-color);content:"";display:block;position:absolute}:host:before{height:1px;left:0;top:50%;transform:translateY(-50%);width:100%}:host:after{height:100%;left:50%;top:0;transform:translateX(-50%);width:1px}:host([centered]){left:50%;position:absolute;top:50%;transform:translate(-50%,-50%)}';class pt extends _{constructor(){super(...arguments),this.$style=ye,this.centered=!1,this.slottable=!1,this.themeColor="rgba(238, 238, 238, 0.5)"}static get observedAttributes(){return super.observedAttributes.concat(["centered"])}}pt.$name=Jt;pt.$version="2.0.0";var Ae=":host{display:block;height:100%;overflow:hidden;position:relative;width:100%}";const Xt=new WeakMap,Yt=new WeakMap,Ht=new WeakMap,Ut=new WeakMap,Te="both",ke="horizontal",jt="vertical",Oe="none";class gt extends _{constructor(){super(...arguments),this.$onSelectionChange=null,this.$onSourceImageLoad=null,this.$onSourceImageTransform=null,this.$scale=1,this.$style=Ae,this.resize=jt,this.selection="",this.slottable=!1}set $image(t){Yt.set(this,t)}get $image(){return Yt.get(this)}set $sourceImage(t){Ut.set(this,t)}get $sourceImage(){return Ut.get(this)}set $canvas(t){Xt.set(this,t)}get $canvas(){return Xt.get(this)}set $selection(t){Ht.set(this,t)}get $selection(){return Ht.get(this)}static get observedAttributes(){return super.observedAttributes.concat(["resize","selection"])}connectedCallback(){super.connectedCallback();let t=null;if(this.selection?t=this.ownerDocument.querySelector(this.selection):t=this.closest(this.$getTagNameOf(R)),K(t)){this.$selection=t,this.$onSelectionChange=this.$handleSelectionChange.bind(this),E(t,M,this.$onSelectionChange);const e=t.closest(this.$getTagNameOf(U));if(e){this.$canvas=e;const s=e.querySelector(this.$getTagNameOf(X));s&&(this.$sourceImage=s,this.$image=s.cloneNode(!0),this.$getShadowRoot().appendChild(this.$image),this.$onSourceImageLoad=this.$handleSourceImageLoad.bind(this),this.$onSourceImageTransform=this.$handleSourceImageTransform.bind(this),E(s.$image,L,this.$onSourceImageLoad),E(s,at,this.$onSourceImageTransform))}this.$render()}}disconnectedCallback(){const{$selection:t,$sourceImage:e}=this;t&&this.$onSelectionChange&&(C(t,M,this.$onSelectionChange),this.$onSelectionChange=null),e&&this.$onSourceImageLoad&&(C(e.$image,L,this.$onSourceImageLoad),this.$onSourceImageLoad=null),e&&this.$onSourceImageTransform&&(C(e,at,this.$onSourceImageTransform),this.$onSourceImageTransform=null),super.disconnectedCallback()}$handleSelectionChange(t){this.$render(t.detail)}$handleSourceImageLoad(){const{$image:t,$sourceImage:e}=this,s=t.getAttribute("src"),i=e.getAttribute("src");i&&i!==s&&(t.setAttribute("src",i),t.$ready(()=>{setTimeout(()=>{this.$render()},50)}))}$handleSourceImageTransform(t){this.$render(void 0,t.detail.matrix)}$render(t,e){const{$canvas:s,$selection:i}=this;!t&&!i.hidden&&(t=i),(!t||t.x===0&&t.y===0&&t.width===0&&t.height===0)&&(t={x:0,y:0,width:s.offsetWidth,height:s.offsetHeight});const{x:n,y:r,width:a,height:c}=t,h={},{clientWidth:o,clientHeight:u}=this;let f=o,p=u,d=NaN;switch(this.resize){case Te:d=1,f=a,p=c,h.width=a,h.height=c;break;case ke:d=c>0?u/c:0,f=a*d,h.width=f;break;case jt:d=a>0?o/a:0,p=c*d,h.height=p;break;case Oe:default:o>0?d=a>0?o/a:0:u>0&&(d=c>0?u/c:0)}this.$scale=d,this.$setStyles(h),this.$sourceImage&&this.$transformImageByOffset(e!=null?e:this.$sourceImage.$getTransform(),-n,-r)}$transformImageByOffset(t,e,s){const{$image:i,$scale:n,$sourceImage:r}=this;if(r&&i&&n>=0){const[a,c,h,o,u,f]=t,p=(e*o-h*s)/(a*o-h*c),d=(s*a-c*e)/(a*o-h*c),y=a*p+h*d+u,w=c*p+o*d+f;i.$ready(g=>{this.$setStyles.call(i,{width:g.naturalWidth*n,height:g.naturalHeight*n})}),i.$setTransform(a,c,h,o,y*n,w*n)}}}gt.$name=ee;gt.$version="2.0.0";/*! Cropper.js v2.0.0 | (c) 2015-present Chen Fengyuan | MIT */var Ne='<cropper-canvas background><cropper-image rotatable scalable skewable translatable></cropper-image><cropper-shade hidden></cropper-shade><cropper-handle action="select" plain></cropper-handle><cropper-selection initial-coverage="0.5" movable resizable><cropper-grid role="grid" bordered covered></cropper-grid><cropper-crosshair centered></cropper-crosshair><cropper-handle action="move" theme-color="rgba(255, 255, 255, 0.35)"></cropper-handle><cropper-handle action="n-resize"></cropper-handle><cropper-handle action="e-resize"></cropper-handle><cropper-handle action="s-resize"></cropper-handle><cropper-handle action="w-resize"></cropper-handle><cropper-handle action="ne-resize"></cropper-handle><cropper-handle action="nw-resize"></cropper-handle><cropper-handle action="se-resize"></cropper-handle><cropper-handle action="sw-resize"></cropper-handle></cropper-selection></cropper-canvas>';const xe=/^img|canvas$/,Ie=/<(\/?(?:script|style)[^>]*)>/gi,Bt={template:Ne};ct.$define();pt.$define();ft.$define();ut.$define();lt.$define();$t.$define();dt.$define();gt.$define();class Cropper{constructor(t,e){if(this.options=Bt,J(t)&&(t=document.querySelector(t)),!K(t)||!xe.test(t.localName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,e=Object.assign(Object.assign({},Bt),e),this.options=e;const{ownerDocument:s}=t;let{container:i}=e;if(i&&(J(i)&&(i=s.querySelector(i)),!K(i)))throw new Error("The `container` option must be an element or a valid selector.");K(i)||(t.parentElement?i=t.parentElement:i=s.body),this.container=i;const n=t.localName;let r="";n==="img"?{src:r}=t:n==="canvas"&&window.HTMLCanvasElement&&(r=t.toDataURL());const{template:a}=e;if(a&&J(a)){const c=document.createElement("template"),h=document.createDocumentFragment();c.innerHTML=a.replace(Ie,"&lt;$1&gt;"),h.appendChild(c.content),Array.from(h.querySelectorAll(X)).forEach(o=>{o.setAttribute("src",r),o.setAttribute("alt",t.alt||"The image to crop")}),t.parentElement?(t.style.display="none",i.insertBefore(h,t.nextSibling)):i.appendChild(h)}}getCropperCanvas(){return this.container.querySelector(U)}getCropperImage(){return this.container.querySelector(X)}getCropperSelection(){return this.container.querySelector(R)}getCropperSelections(){return this.container.querySelectorAll(R)}}Cropper.version="2.0.0";window.Cropper = Cropper;